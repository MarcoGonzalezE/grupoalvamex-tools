<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!--- Action-->
        <record id="ventas_produccion_action" model="ir.actions.act_window">
            <field name="name">Planeacion</field>
            <field name="res_model">ventas.produccion</field>
            <field name="view_mode">tree,form</field>
        </record>

        <!--- Tree -->
        <record id="boton_produccion_tree" model="ir.ui.view">
            <field name="name">ventas.produccion.tree.view</field>
            <field name="model">ventas.produccion</field>
            <field name="arch" type="xml">
                <tree string="Plaeacion de Produccion"
                      colors="red:estado=='cancel'; navy:estado =='final' ; teal:estado=='aceptado';">
                    <field name="name"/>
                    <field name="fecha_pedido"/>
                    <field name="cliente"/>
                    <field name="estado"/>
                </tree>
            </field>
        </record>

        <!--- Form -->
        <record id="ventas_produccion_form" model="ir.ui.view">
            <field name="name">Planeacion de Produccion</field>
            <field name="model">ventas.produccion</field>
            <field name="arch" type="xml">
                <form string="Planeacion"><!--edit="false"-->
                    <header>
<!--                        <button string="VALIDAR SALIDA" type="object"  name="check_aprobado" attrs="{'invisible':['|',('enviado_pt','=',True),('estado','!=','aceptado')]}" groups="grupoalvamex_tools.planeacion_ventas"/><b/>-->

<!--                        <button string="ENVIAR A PRODUCCION" type="object" class="oe_highlight" name="enviado" attrs="{'invisible':[('estado','!=','creado')]}" groups="grupoalvamex_tools.planeacion_ventas"/><b/>-->
<!--                        -->
<!--                        <button string="CANCELAR" type="object" spclass="btn btn-danger" name="cancelado" attrs="{'invisible':['|',('estado','=','final'),('estado','=','cancel')]}"/><b/>-->
<!--                        -->
<!--                        <button string="ACEPTAR PEDIDO" type="object" class="oe_highlight" name="aceptado" groups="grupoalvamex_tools.planeacion_produccion" attrs="{'invisible':[('estado','!=','enviado')]}"/><b/>-->
<!--                        -->
                        <button string="CONFIRMAR PEDIDO A PRODUCCION" type="object" class="oe_highlight" name="listo"/><b/>
                        <field name="estado" widget="statusbar" class="oe_highlight"/>
                        <button string="Comprobar disponibilidad" type="object" class="oe_highlight" name="comprobar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1><field name="name" readonly="1"/></h1>
                        </div>
                        <group>
                            <group>
                                <field name="cliente" required="1" attrs="{'invisible':['|',('estado','=', 'cancel'),('estado','=', 'final')]}"/>
                                <field name="fecha_pedido" readonly="1"/>
                            </group>
                            <group>
                                <field name="fecha_inicio" readonly="1"/>
                                <field name="enviado_pt" attrs="{'invisible':[('enviado_pt','=', False)]}" readonly="1"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="fecha_produccion" readonly="1"/>
                            </group>
                            <group>
                                <field name="fecha_termino" readonly="1"/>
                            </group>
                            <field name="aviso"/>
                        </group>
                        <group>
                            <notebook>
                                <page string="Productos">
                                    <field name="producto" readonly="1">
                                        <tree>
                                            <field name="product_id"/>
                                            <field name="name"/>
                                            <field name="product_uom_qty" sum="Total"/>
                                            <field name="product_uom"/>
                                        </tree>
                                    </field>
                                </page>
                                <page string="Ventas">
                                    <field name="ventas_id" attrs="{'invisible':['|',('estado','=', 'cancel'),('estado','=', 'final')]}"/>
                                </page>
                            </notebook>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

<!---ACCION PARA ENVIAR A PLANEACION-->
        <record id="action_venta_produccion_form" model="ir.ui.view">
            <field name="name">Planear Produccion</field>
            <field name="model">ventas.produccion.planeacion</field>
            <field name="arch" type="xml">
                <form string="Crear orden de Planeacion">
                    <separator colspan="4" string="Â¿Crear orden de planeacion?"/>
                    <footer>
                        <button name="planeacion" string="Confirmar" type="object"/>or
                        <button class="oe_link" special="cancel" string="Cancelar"/>
                    </footer>
                </form>
            </field>
        </record>
        <act_window id="action_venta_planeacion_produccion" key2="client_action_multi" name="Crear orden de Planeacion" res_model="ventas.produccion.planeacion" src_model="sale.order" target="new" view_mode="form"/>
        
        <!--Menus-->
        <menuitem name="Planeacion" id="menu_planeacion" sequence="25"
                  web_icon="grupoalvamex_tools,static/description/planeacion.png"/>
        <menuitem name="Planeacion" id="menu_produccion_planeacion" parent="menu_planeacion" action="ventas_produccion_action"
                  sequence="650"/>

                

<!-- Inventario Produccion -->
        <record id="ventas_produccion_inventario_view_form" model="ir.ui.view">
            <field name="name">ventas.produccion.inventario.form</field>
            <field name="model">ventas.produccion.inventario</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button type="object" name="registrar_entrada" string="Registrar Entrada" class="btn-primary"/>
                    </header>
                    <sheet>                        
                        <div>
                            <field name="imagen" widget="image" class="oe_avatar"/>
                            <group>
                                <group>
                                    <field name="name"/>
                                </group>
                                <group>
                                    <field name="s_min"/>
                                    <field name="s_fal" readonly="1"/>
                                </group>
                                <group>
                                    <div>
                                        <p><h3>STOCK</h3> <field name="stock_total"/></p>
                                    </div>
                                </group>
                            </group>
                        </div>
                        <group>
                            <notebook>
                                <page string="Entradas">
                                    <field name="entrada_ids">
                                        <tree editable="top">
                                            <field name="fecha_entrada" readonly="1"/>
                                            <field name="entrada_stock" readonly="1"/>
                                            <field name="lote" readonly="1"/>
                                            <field name="nota" readonly="1"/>
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="ventas_produccion_inventario_view_kandan" model="ir.ui.view">
            <field name="name">ventas.produccion.inventario.kanban.view</field>
            <field name="model">ventas.produccion.inventario</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban">
                    <field name="name"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click">
                                <div class="o_kanban_image">
                                    <img t-att-src="kanban_image('ventas.produccion.inventario', 'imagen', record.id.value)"/>
                                </div>
                                <div class="oe_kanban_details">
                                    <strong class="oe_partner_heading"><field name="name"/></strong>
                                    <!-- <ul>
                                        <strong><field name="info_stock"/></strong>
                                    </ul> -->
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
<!--- Pedido PT Tree -->
        <record id="pedido_pt_tree" model="ir.ui.view">
            <field name="name">ventas.produccion.inventario.tree.view</field>
            <field name="model">ventas.produccion.inventario</field>
            <field name="arch" type="xml">
                <tree string="Inventario Info" edit="false" create="false">
                    <field name="name"/>
                    <field name="s_min"/>
                    <field name="stock_total"/>
                    <field name="s_fal"/>
                </tree>
            </field>
        </record>


        <record id="ventas_produccion_inventario_action" model="ir.actions.act_window">
            <field name="name">Inventario</field>
            <field name="res_model">ventas.produccion.inventario</field>
            <field name="view_mode">kanban,form</field>
            <field name="help" type="html">
                <p>No se encontro inventario</p>
            </field>
        </record>
        <record id="ventas_produccion_pedidopt_action" model="ir.actions.act_window">
            <field name="name">Inventario Info</field>
            <field name="res_model">ventas.produccion.inventario</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p>No se encontro inventario</p>
            </field>
        </record>

        <menuitem name="Inventario" id="menu_inventario" parent="menu_planeacion" action="ventas_produccion_inventario_action" sequence="660"/>
        <menuitem name="Inventario Info" id="menu_pedidopt" parent="menu_planeacion" action="ventas_produccion_pedidopt_action" sequence="661"/>

<!-- Inventario Entrada -->
        <record id="inventario_entrada_view_form" model="ir.ui.view">
          <field name="name">inventario.entrada.form.view</field>
          <field name="model">inventario.entradas</field>
          <field name="arch" type="xml">
            <form>
                <group>
                    <field name="entrada_id" readonly="True"/>
                    <field name="entrada_stock"/>
                    <field name="lote"/>
                    <field name="fecha_entrada"/>
                </group>
                <group>
                    <field name="nota"/>
                </group>
                <footer>
                    <button string="Save" class="oe_highlight" name="save" type="object" />
                    <button string="Cancel" class="oe_highlight" special="cancel" />
                </footer>
            </form>
          </field>
      </record>

    
    </data>
</odoo>